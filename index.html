<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Finance Tracker</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-gradient: linear-gradient(135deg, #ece9e6, #ffffff);
      --card-bg: rgba(255,255,255,0.3);
      --input-bg: rgba(255,255,255,0.6);
      --text-color: #333;
      --income-light: rgba(67,233,123,0.2);
      --income-dark-color: #276b4a;
      --expense-light: rgba(255,106,106,0.2);
      --expense-dark-color: #a83333;
    }
    [data-theme="dark"] {
      --bg-gradient: linear-gradient(135deg, #2c3e50, #4ca1af);
      --card-bg: rgba(20,20,20,0.5);
      --input-bg: rgba(40,40,40,0.6);
      --text-color: #eee;
      --income-light: rgba(67,233,123,0.4);
      --income-dark-color: #2b5c3a;
      --expense-light: rgba(255,106,106,0.4);
      --expense-dark-color: #8c2a2a;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Montserrat',sans-serif}
    body{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--bg-gradient);transition:background .3s;}
    .tracker{width:360px;background:var(--card-bg);backdrop-filter:blur(12px);border-radius:24px;padding:2rem;box-shadow:0 8px 32px rgba(0,0,0,.12);color:var(--text-color);transition:color .3s;position:relative;z-index:1}
    .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}
    .header h1{font-size:1.5rem}
    .header-controls{display:flex;align-items:center}
    .header-controls button{width:32px;height:32px;border:none;background:none;cursor:pointer;font-size:1.2rem;color:var(--text-color);margin-left:12px}
    .input-group{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1.25rem}
    .input-group textarea,.input-group input{width:100%;padding:.75rem 1rem;border:none;border-radius:12px;background:var(--input-bg);backdrop-filter:blur(6px);font-size:.95rem;color:var(--text-color)}
    .input-group textarea{height:60px;resize:none;overflow:hidden}
    .toggle-group{display:flex;position:relative;background:var(--input-bg);backdrop-filter:blur(6px);border-radius:12px;overflow:hidden}
    .toggle-group button{flex:1;padding:.75rem 0;border:none;background:transparent;font-size:.95rem;color:var(--text-color);cursor:pointer;z-index:1}
    .toggle-group .indicator{position:absolute;bottom:0;left:10%;width:30%;height:4px;background:var(--text-color);transition:left .3s}
    .active-income{background:var(--income-light);color:var(--income-dark-color)}
    .active-expense{background:var(--expense-light);color:var(--expense-dark-color)}
    .btn-add{width:100%;padding:.75rem;font-weight:600;font-size:.95rem;color:#fff;border:none;border-radius:12px;cursor:pointer;background:linear-gradient(135deg,#43e97b,#38f9d7)}
    .btn-expense-mode{background:linear-gradient(135deg,#ff6a6a,#ff8c8c)}
    .summary{display:flex;justify-content:space-evenly;margin:1.5rem 0;font-weight:600}
    .summary>div{flex:1}
    .summary .expense{text-align:left}
    .summary .balance{text-align:center}
    .summary .income{text-align:right}
    .transactions{max-height:200px;overflow-y:auto;display:flex;flex-direction:column;gap:.75rem;scrollbar-width:none;-ms-overflow-style:none}
    .transactions::-webkit-scrollbar{display:none}
    .transaction{display:flex;justify-content:space-between;align-items:center;background:var(--input-bg);backdrop-filter:blur(6px);padding:.75rem 1rem;border-radius:12px}
    /* custom modal */
    .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;z-index:2}
    .modal{background:#ffffff; /* opaque backdrop for dialog */ color:#000000; padding:2rem; border-radius:16px; width:95%; max-width:400px;}
    .modal h2{margin-bottom:1rem;font-size:1.25rem;text-align:center}
    [data-theme="dark"] .modal{background:#333333; color:#ffffff;}
    .modal textarea{width:100%;height:150px;padding:1rem;font-size:1rem;color:var(--text-color);background:#f0f0f0;border:none;border-radius:8px;resize:none;scrollbar-width:none;-ms-overflow-style:none;}
    .modal textarea::-webkit-scrollbar{display:none;}
    [data-theme="dark"] .modal textarea{background:rgba(255,255,255,0.1);}
    .modal .actions{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem}
    .modal button{padding:.75rem 1.25rem;border:none;border-radius:8px;cursor:pointer;font-weight:600;}
    .btn-copy{background:linear-gradient(135deg,#2563eb,#3b82f6);color:#fff;}
    .btn-close{background:rgba(0,0,0,0.1);color:var(--text-color);}
    /* Mobile styles */
    @media (max-width: 480px) {
      body{overflow:auto;}
      .tracker{width:90%;max-width:360px;margin:1rem auto;}
      .transactions{max-height:140px;overflow-y:auto;}
    }
  </style>
</head>
<body>
  <div class="tracker">
    <div class="header">
      <h1>Finance Tracker</h1>
      <div class="header-controls">
        <button id="exportToggle" title="Export Data">ðŸ“¤</button>
        <button id="importToggle" title="Import Data">ðŸ“¥</button>
        <button id="themeToggle" title="Toggle Theme">ðŸŒ™</button>
      </div>
    </div>
    <div class="input-group">
      <textarea id="desc" placeholder="Description"></textarea>
      <input type="number" id="amount" placeholder="Amount â‚¹" min="0">
      <div class="toggle-group">
        <button id="expenseBtn">Expense</button>
        <button id="incomeBtn" class="active-income">Income</button>
        <div class="indicator"></div>
      </div>
      <button class="btn-add btn-income" id="addBtn">Add Transaction</button>
    </div>
    <div class="summary">
      <div class="expense">Expense: â‚¹<span id="total-expense">0.00</span></div>
      <div class="balance">Balance: â‚¹<span id="balance">0.00</span></div>
      <div class="income">Income: â‚¹<span id="total-income">0.00</span></div>
    </div>
    <div class="transactions" id="list"></div>
  </div>
  <!-- Modal for export/import -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal" id="modal">
      <h2 id="modalTitle">Export Data</h2>
      <textarea id="modalTextarea" readonly></textarea>
      <div class="actions">
        <button class="btn-copy" id="modalCopy">Copy</button>
        <button class="btn-close" id="modalClose">Close</button>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('contextmenu', e=> e.preventDefault());
    document.addEventListener('keydown', e=> { if (e.ctrlKey||e.metaKey){ const b=['s','u','i','j','c']; if(b.includes(e.key.toLowerCase())) e.preventDefault();} if(e.key==='F12') e.preventDefault();});
    const themeToggle=document.getElementById('themeToggle'), exportToggle=document.getElementById('exportToggle'), importToggle=document.getElementById('importToggle'), root=document.documentElement;
    const modalOverlay=document.getElementById('modalOverlay'), modalTitle=document.getElementById('modalTitle'), modalTextarea=document.getElementById('modalTextarea'), modalCopy=document.getElementById('modalCopy'), modalClose=document.getElementById('modalClose');
    function setTheme(t){ root.setAttribute('data-theme',t); themeToggle.textContent=t==='dark'?'â˜€ï¸':'ðŸŒ™'; localStorage.setItem('theme',t);}    
    document.addEventListener('DOMContentLoaded',()=>{ setTheme(localStorage.getItem('theme')||'light'); init(); });
    themeToggle.addEventListener('click',()=> setTheme(root.getAttribute('data-theme')==='light'?'dark':'light'));
    let transactions=JSON.parse(localStorage.getItem('transactions')||'[]'); let currentType='income';
    const incomeBtn=document.getElementById('incomeBtn'), expenseBtn=document.getElementById('expenseBtn'), indicator=document.querySelector('.indicator'), addBtn=document.getElementById('addBtn');
    function init(){ incomeBtn.addEventListener('click',()=>toggle('income')); expenseBtn.addEventListener('click',()=>toggle('expense')); addBtn.addEventListener('click',addTransaction); exportToggle.addEventListener('click',()=>openModal('export')); importToggle.addEventListener('click',()=>openModal('import')); toggle('income'); updateSummary(); render(); }
    function toggle(type){ currentType=type; incomeBtn.classList.toggle('active-income',type==='income'); expenseBtn.classList.toggle('active-expense',type==='expense'); addBtn.classList.toggle('btn-expense-mode',type==='expense'); indicator.style.left = type==='expense'?'10%':'60%'; }
    function save(){ localStorage.setItem('transactions',JSON.stringify(transactions)); }
    function updateSummary(){ const inc=transactions.filter(t=>t.type==='income').reduce((a,b)=>a+b.amount,0), exp=transactions.filter(t=>t.type==='expense').reduce((a,b)=>a+b.amount,0); document.getElementById('total-income').textContent=inc.toFixed(2); document.getElementById('total-expense').textContent=exp.toFixed(2); document.getElementById('balance').textContent=(inc-exp).toFixed(2); }
    function render(){ const list=document.getElementById('list'); list.innerHTML=''; transactions.slice().reverse().forEach(t=>{ const el=document.createElement('div'); el.className='transaction'; el.innerHTML=`<div><div>${t.desc||'â€”'}</div><div>â‚¹${t.amount.toFixed(2)}</div><div>${t.date}</div></div>`; list.appendChild(el); }); }
    function addTransaction(){ const d=document.getElementById('desc').value.trim(), a=parseFloat(document.getElementById('amount').value); if(!a||a<=0) return alert('Enter a valid amount'); const n=new Date(), date=`${String(n.getDate()).padStart(2,'0')}/${String(n.getMonth()+1).padStart(2,'0')}/${n.getFullYear()}`; transactions.push({desc:d,amount:a,type:currentType,date}); save(); document.getElementById('desc').value=''; document.getElementById('amount').value=''; updateSummary(); render(); }
    function openModal(mode){ if(mode==='export'){ modalTitle.textContent='Export Data'; modalTextarea.value=btoa(JSON.stringify(transactions)); modalTextarea.readOnly=true; modalCopy.textContent='Copy'; } else { modalTitle.textContent='Import Data'; modalTextarea.value=''; modalTextarea.readOnly=false; modalCopy.textContent='Import'; } modalOverlay.style.display='flex'; }
    modalClose.addEventListener('click',()=> modalOverlay.style.display='none');
    modalCopy.addEventListener('click',()=>{ if(modalTitle.textContent==='Export Data'){ modalTextarea.select(); document.execCommand('copy'); modalCopy.textContent='Copied'; } else { try{ const parsed=JSON.parse(atob(modalTextarea.value)); if(Array.isArray(parsed)){ transactions=parsed; save(); updateSummary(); render(); modalOverlay.style.display='none'; } else throw 1;}catch{ alert('Invalid data string!'); }} });
  </script>
</body>
</html>
